import{u as j,c as y,r as n,j as o}from"./components-D-S9gEDp.js";function R(){const a=j(),e=y(),[s,u]=n.useState(a.monitorStatus.isRunning),[c,h]=n.useState(a.monitorStatus.lastRun),[x,m]=n.useState(a.monitorStatus.nextRun),[t,d]=n.useState(null),[p,l]=n.useState(null);n.useEffect(()=>{e.data&&(e.data.monitorStatus?(u(e.data.monitorStatus.isRunning),h(e.data.monitorStatus.lastRun),m(e.data.monitorStatus.nextRun)):e.data.success!==void 0?(d(e.data),l(null)):e.data.error&&(l(e.data.error),d(null)))},[e.data]);const b=()=>{e.submit({intent:"toggleMonitor"},{method:"post"})},f=()=>{d(null),l(null),e.submit({intent:"runInitialSync"},{method:"post"})};return o.jsxs("div",{style:{padding:"20px",fontFamily:"Inter",maxWidth:"1200px",margin:"0 auto",borderRadius:"8px"},children:[o.jsx("h1",{style:{textAlign:"center",color:"#121212ff",marginBottom:"20px"},children:"Sincronização de Produtos Shopify"}),o.jsx("p",{style:{textAlign:"center",color:"#555",marginBottom:"30px"},children:"Esta página processa os dados de produtos do arquivo JSON de resultados de pesquisa e os sincroniza com o Shopify."}),o.jsxs("div",{style:{marginBottom:"30px",padding:"20px",backgroundColor:"#f0f8ff",borderRadius:"10px",border:"1px solid #cce5ff",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",textAlign:"center"},children:[o.jsx("h3",{style:{color:"#0056b3",marginBottom:"20px"},children:"⏱️ Monitor de Sincronização Automática"}),o.jsxs("p",{style:{fontSize:"1.1em",marginBottom:"15px",color:"#333"},children:["Status: ",o.jsx("span",{style:{fontWeight:"bold",color:s?"#28a745":"#dc3545"},children:s?"EM EXECUÇÃO":"PARADO"})]}),c&&o.jsxs("p",{style:{fontSize:"0.9em",color:"#666",marginBottom:"10px"},children:["Última execução: ",new Date(c).toLocaleString()]}),x&&s&&o.jsxs("p",{style:{fontSize:"0.9em",color:"#666",marginBottom:"20px"},children:["Próxima execução: ",new Date(x).toLocaleString()]}),o.jsx("button",{onClick:b,style:{padding:"12px 25px",backgroundColor:s?"#dc3545":"#007bff",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"16px",fontWeight:"bold",boxShadow:"0 4px 8px rgba(0,0,0,0.2)",transition:"background-color 0.3s ease, transform 0.2s ease"},onMouseOver:r=>r.currentTarget.style.backgroundColor=s?"#c82333":"#0056b3",onMouseOut:r=>r.currentTarget.style.backgroundColor=s?"#dc3545":"#007bff",onMouseDown:r=>r.currentTarget.style.transform="translateY(1px)",onMouseUp:r=>r.currentTarget.style.transform="translateY(0)",disabled:e.state==="submitting",children:e.state==="submitting"?"Atualizando...":s?"Parar Monitoramento":"Iniciar Monitoramento"})]}),t&&t.success?o.jsxs("div",{style:{padding:"20px",backgroundColor:"#d4edda",color:"#155724",borderRadius:"8px",border:"1px solid #c3e6cb",marginBottom:"20px",boxShadow:"0 2px 4px rgba(0,0,0,0.05)"},children:[o.jsx("h2",{style:{textAlign:"center",color:"#155724",marginBottom:"15px"},children:"✅ Processamento Inicial Concluído!"}),o.jsx("p",{style:{marginBottom:"25px",textAlign:"center"},children:t.message}),t.createdProducts.length>0&&o.jsxs("div",{style:{marginBottom:"30px"},children:[o.jsxs("h3",{style:{color:"#28a745",marginBottom:"20px",borderBottom:"1px solid #c3e6cb",paddingBottom:"10px"},children:["🆕 Produtos Criados (",t.createdProducts.length,")"]}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"20px"},children:t.createdProducts.map((r,i)=>o.jsxs("div",{style:{padding:"20px",backgroundColor:"#f8f9fa",borderRadius:"8px",border:"2px solid #28a745",boxShadow:"0 4px 8px rgba(0,0,0,0.1)"},children:[o.jsx("h4",{style:{margin:"0 0 10px 0",color:"#495057",fontSize:"1.1em"},children:r.product.title}),o.jsxs("div",{style:{fontSize:"14px",lineHeight:"1.6",color:"#666"},children:[o.jsxs("p",{style:{margin:"5px 0"},children:[o.jsx("strong",{children:"SKU:"})," ",r.reference]}),o.jsxs("p",{style:{margin:"5px 0"},children:[o.jsx("strong",{children:"Preço:"})," €",r.price]}),o.jsxs("p",{style:{margin:"5px 0"},children:[o.jsx("strong",{children:"Estoque:"})," ",r.stock!==void 0?`${r.stock} unidades`:"N/D"]}),o.jsxs("p",{style:{margin:"5px 0"},children:[o.jsx("strong",{children:"Identificador:"})," ",r.product.handle]}),o.jsxs("p",{style:{margin:"5px 0"},children:[o.jsx("strong",{children:"Rastreamento:"})," ",o.jsx("span",{style:{color:"#28a745",fontWeight:"bold"},children:"✅ Ativado"})]})]}),o.jsx("span",{style:{backgroundColor:"#28a745",color:"white",padding:"6px 12px",borderRadius:"5px",fontSize:"13px",fontWeight:"bold",marginTop:"15px",display:"inline-block"},children:"CRIADO"})]},i))})]}),t.updatedProducts.length>0&&o.jsxs("div",{style:{marginBottom:"30px"},children:[o.jsxs("h3",{style:{color:"#007bff",marginBottom:"20px",borderBottom:"1px solid #cce5ff",paddingBottom:"10px"},children:["🔄 Produtos Atualizados (",t.updatedProducts.length,")"]}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"20px"},children:t.updatedProducts.map((r,i)=>o.jsxs("div",{style:{padding:"20px",backgroundColor:"#f8f9fa",borderRadius:"8px",border:"2px solid #007bff",boxShadow:"0 4px 8px rgba(0,0,0,0.1)"},children:[o.jsx("h4",{style:{margin:"0 0 10px 0",color:"#495057",fontSize:"1.1em"},children:r.product.title}),o.jsxs("div",{style:{fontSize:"14px",lineHeight:"1.6",color:"#666"},children:[o.jsxs("p",{style:{margin:"5px 0"},children:[o.jsx("strong",{children:"SKU:"})," ",r.reference]}),o.jsxs("p",{style:{margin:"5px 0"},children:[o.jsx("strong",{children:"Preço:"})," €",r.price]}),o.jsxs("p",{style:{margin:"5px 0"},children:[o.jsx("strong",{children:"Estoque:"})," ",r.stock!==void 0?`${r.stock} unidades`:"N/D"]}),o.jsxs("p",{style:{margin:"5px 0"},children:[o.jsx("strong",{children:"Identificador:"})," ",r.product.handle]}),o.jsxs("p",{style:{margin:"5px 0"},children:[o.jsx("strong",{children:"Rastreamento:"})," ",o.jsx("span",{style:{color:"#28a745",fontWeight:"bold"},children:"✅ Ativado"})]})]}),o.jsx("span",{style:{backgroundColor:"#007bff",color:"white",padding:"6px 12px",borderRadius:"5px",fontSize:"13px",fontWeight:"bold",marginTop:"15px",display:"inline-block"},children:"ATUALIZADO"})]},i))})]})]}):p?o.jsxs("div",{style:{padding:"20px",backgroundColor:"#f8d7da",color:"#721c24",borderRadius:"8px",border:"1px solid #f5c6cb",marginBottom:"20px",boxShadow:"0 2px 4px rgba(0,0,0,0.05)"},children:[o.jsx("h2",{style:{textAlign:"center",color:"#721c24",marginBottom:"15px"},children:"❌ Erro"}),o.jsx("p",{style:{textAlign:"center",marginBottom:"10px"},children:p})]}):null,t&&t.errors&&t.errors.length>0&&o.jsxs("div",{style:{padding:"20px",backgroundColor:"#fff3cd",color:"#856404",borderRadius:"8px",border:"1px solid #ffeeba",marginBottom:"20px",boxShadow:"0 2px 4px rgba(0,0,0,0.05)"},children:[o.jsxs("h3",{style:{color:"#856404",marginBottom:"20px",borderBottom:"1px solid #ffeeba",paddingBottom:"10px"},children:["⚠️ Errors (",t.errors.length,")"]}),o.jsx("div",{style:{maxHeight:"300px",overflowY:"auto",border:"1px solid #ffeeba",borderRadius:"5px",padding:"10px",backgroundColor:"#fff"},children:t.errors.map((r,i)=>o.jsxs("div",{style:{margin:"10px 0",padding:"15px",backgroundColor:"#f8d7da",borderRadius:"5px",border:"1px solid #dc3545",boxShadow:"0 2px 4px rgba(0,0,0,0.05)"},children:[o.jsxs("strong",{style:{color:"#dc3545"},children:["Reference: ",r.reference]})," (",r.action,")",o.jsx("br",{}),o.jsx("span",{style:{fontSize:"14px",color:"#721c24"},children:r.error||r.errors&&r.errors.map(g=>`${g.field}: ${g.message}`).join(", ")})]},i))})]}),t&&t.sourceData&&o.jsxs("div",{style:{padding:"20px",backgroundColor:"#e7f3ff",borderRadius:"8px",border:"1px solid #b8daff",marginBottom:"20px",boxShadow:"0 2px 4px rgba(0,0,0,0.05)"},children:[o.jsx("h3",{style:{color:"#0056b3",marginBottom:"20px",borderBottom:"1px solid #b8daff",paddingBottom:"10px"},children:"📊 Resumo dos Dados de Origem"}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px",fontSize:"14px",color:"#555"},children:[o.jsxs("div",{children:[o.jsx("strong",{children:"Data da Pesquisa:"}),o.jsx("br",{}),new Date(t.sourceData.searchDate).toLocaleString()]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Total Encontrado:"}),o.jsx("br",{}),t.sourceData.totalFound," produtos"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Total Pesquisado:"}),o.jsx("br",{}),t.sourceData.totalSearched," produtos"]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Status do Arquivo:"}),o.jsx("br",{}),"✅ Carregado com sucesso"]})]})]}),o.jsx("div",{style:{textAlign:"center",marginTop:"40px"},children:o.jsx("button",{onClick:f,style:{padding:"15px 30px",backgroundColor:"#007cba",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"17px",fontWeight:"bold",boxShadow:"0 4px 8px rgba(0,0,0,0.2)",transition:"background-color 0.3s ease, transform 0.2s ease"},onMouseOver:r=>r.currentTarget.style.backgroundColor="#005f8a",onMouseOut:r=>r.currentTarget.style.backgroundColor="#007cba",onMouseDown:r=>r.currentTarget.style.transform="translateY(1px)",onMouseUp:r=>r.currentTarget.style.transform="translateY(0)",disabled:e.state==="submitting",children:e.state==="submitting"?"Processando...":"🔄 Atualizar e Processar Dados"})})]})}export{R as default};
