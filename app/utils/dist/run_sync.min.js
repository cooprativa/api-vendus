"use strict";var _require=require("child_process"),execSync=_require.execSync,path=require("path");require("dotenv").config();var pageReaderPath=path.join(__dirname,"page_reader_products.js"),_require2=require("./app/utils/products"),syncProductsWithShopify=_require2.syncProductsWithShopify,_require3=require("./app/services/settings.server"),getVendusApi=_require3.getVendusApi;function runFullSyncProcess(){var r,o;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("--- Starting Vendus Product Data Refresh ---"),console.log("Executing: node ".concat(pageReaderPath)),execSync("node ".concat(pageReaderPath),{stdio:"inherit"}),console.log("--- Vendus Product Data Refresh Completed ---"),console.log("Proceeding with Shopify product synchronization..."),getVendusApi()||(console.error("Vendus API Key is not available. Ensure it's set in your .env or settings.server.js."),process.exit(1)),r={graphql:function(r){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("--- Simulating Shopify Admin GraphQL call ---"),console.log("Query (first 100 chars):",r.substring(0,100)+"..."),e.abrupt("return",{json:function(){return{data:{productCreate:{product:{id:"gid://shopify/Product/123456789"},userErrors:[]},productUpdate:{product:{id:"gid://shopify/Product/123456789"},userErrors:[]},productDelete:{deletedProductId:"gid://shopify/Product/987654321",userErrors:[]},publications:{edges:[{node:{id:"gid://shopify/Publication/12345",name:"Online Store"}}]},products:{edges:[],pageInfo:{hasNextPage:!1}}},errors:null}}});case 3:case"end":return e.stop()}})}},e.next=11,regeneratorRuntime.awrap(syncProductsWithShopify(r));case 11:o=e.sent,console.log("\n--- Shopify Synchronization Results ---"),console.log(JSON.stringify(o,null,2)),o.success?console.log("\nüéâ Full synchronization process completed successfully!"):(console.error("\n‚ùå Full synchronization process finished with errors."),process.exit(1)),e.next=22;break;case 17:e.prev=17,e.t0=e.catch(0),console.error("\n‚ùå Error during full synchronization process:"),console.error(e.t0),process.exit(1);case 22:case"end":return e.stop()}},null,null,[[0,17]])}runFullSyncProcess();
//# sourceMappingURL=run_sync.min.js.map
