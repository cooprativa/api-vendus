{"version":3,"sources":["shopify.server.js"],"names":["SHOPIFY_API_KEY","SHOPIFY_API_SECRET","SHOPIFY_APP_URL","SCOPES","console","log","LATEST_API_VERSION","substring","shopify","apiKey","apiSecretKey","apiVersion","scopes","split","appUrl","authPathPrefix","sessionStorage","PrismaSessionStorage","prisma","distribution","AppDistribution","AppStore","future","unstable_newEmbeddedAuthStrategy","removeRest","process","env","SHOP_CUSTOM_DOMAIN","customShopDomains","addDocumentResponseHeaders","authenticate","unauthenticated","login","registerWebhooks"],"mappings":";;;;;;;AAEA;;AACA;;AAKA;;AACA;;AAGA;;;;;;;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAMA,eAAe,GAAG,kCAAxB;AACA,IAAMC,kBAAkB,GAAG,kCAA3B;AACA,IAAMC,eAAe,GAAG,2EAAxB;AACA,IAAMC,MAAM,GAAG,2LAAf,C,CACA;AAEA;;AACAC,OAAO,CAACC,GAAR,CAAY,6CAAZ;AACAD,OAAO,CAACC,GAAR,CAAY,iCAAZ,EAA+CC,8BAA/C;AACAF,OAAO,CAACC,GAAR,CAAY,wBAAZ,EAAsCL,eAAtC;AACAI,OAAO,CAACC,GAAR,CAAY,2CAAZ,EAAyDJ,kBAAkB,CAACM,SAAnB,CAA6B,CAA7B,EAAgC,CAAhC,IAAqC,KAA9F,E,CAAsG;;AACtGH,OAAO,CAACC,GAAR,CAAY,wBAAZ,EAAsCH,eAAtC;AACAE,OAAO,CAACC,GAAR,CAAY,eAAZ,EAA6BF,MAA7B;AACAC,OAAO,CAACC,GAAR,CAAY,4BAAZ,E,CACA;;AAEA,IAAMG,OAAO,GAAG;AACd;AACAC,EAAAA,MAAM,EAAET,eAFM;AAGdU,EAAAA,YAAY,EAAET,kBAHA;AAId;AACA;AACAU,EAAAA,UAAU,EAAEL,8BANE;AAOdM,EAAAA,MAAM,EAAET,MAAM,CAACU,KAAP,CAAa,GAAb,CAPM;AAOa;AAC3BC,EAAAA,MAAM,EAAEZ,eARM;AASda,EAAAA,cAAc,EAAE,OATF;AAUdC,EAAAA,cAAc,EAAE,IAAIC,oDAAJ,CAAyBC,cAAzB,CAVF;AAWdC,EAAAA,YAAY,EAAEC,wBAAgBC,QAXhB;AAYdC,EAAAA,MAAM,EAAE;AACNC,IAAAA,gCAAgC,EAAE,IAD5B;AAENC,IAAAA,UAAU,EAAE;AAFN;AAZM,GAkBVC,OAAO,CAACC,GAAR,CAAYC,kBAAZ,GACA;AAAEC,EAAAA,iBAAiB,EAAE,CAACH,OAAO,CAACC,GAAR,CAAYC,kBAAb;AAArB,CADA,GAEA,EApBU,EAAhB;eAuBenB,O,EACf;;;AACO,IAAMG,UAAU,GAAGL,8BAAnB;;AACA,IAAMuB,0BAA0B,GAAGrB,OAAO,CAACqB,0BAA3C;;AACA,IAAMC,YAAY,GAAGtB,OAAO,CAACsB,YAA7B;;AACA,IAAMC,eAAe,GAAGvB,OAAO,CAACuB,eAAhC;;AACA,IAAMC,KAAK,GAAGxB,OAAO,CAACwB,KAAtB;;AACA,IAAMC,gBAAgB,GAAGzB,OAAO,CAACyB,gBAAjC;;AACA,IAAMjB,cAAc,GAAGR,OAAO,CAACQ,cAA/B","sourcesContent":["// File: app/shopify.server.js\r\n\r\nimport \"@shopify/shopify-app-remix/adapters/node\";\r\nimport {\r\n  ApiVersion,\r\n  AppDistribution,\r\n  shopifyApp,\r\n} from \"@shopify/shopify-app-remix/server\";\r\nimport { PrismaSessionStorage } from \"@shopify/shopify-app-session-storage-prisma\";\r\nimport prisma from \"./db.server\";\r\n\r\n// Import LATEST_API_VERSION for future-proofing\r\nimport { LATEST_API_VERSION } from \"@shopify/shopify-api\";\r\n\r\n// --- IMPORTANT: HARDCODED ENVIRONMENT VARIABLES FOR DEBUGGING ---\r\n// WARNING: Hardcoding sensitive information like API keys and secrets\r\n// is NOT recommended for production environments due to security risks.\r\n// This is done here ONLY for debugging purposes to rule out issues\r\n// with environment variable loading. Please revert to process.env\r\n// variables once the issue is resolved.\r\nconst SHOPIFY_API_KEY = \"6b604bcb8589b5c8171814656a502d08\";\r\nconst SHOPIFY_API_SECRET = \"44736dfe0ee8b616e78c745bda7f8171\";\r\nconst SHOPIFY_APP_URL = \"https://prescription-screenshot-calculation-evaluations.trycloudflare.com\";\r\nconst SCOPES = \"write_products,read_products,write_inventory,read_inventory,write_orders,read_orders,write_customers,read_customers,read_locations,read_markets_home,read_publications,write_publications\";\r\n// --- END HARDCODED ENVIRONMENT VARIABLES ---\r\n\r\n// --- NEW LOGGING FOR DEBUGGING ---\r\nconsole.log(\"--- Shopify App Configuration Debugging ---\");\r\nconsole.log(\"LATEST_API_VERSION resolved to:\", LATEST_API_VERSION);\r\nconsole.log(\"Using SHOPIFY_API_KEY:\", SHOPIFY_API_KEY);\r\nconsole.log(\"Using SHOPIFY_API_SECRET (first 5 chars):\", SHOPIFY_API_SECRET.substring(0, 5) + \"...\"); // Mask for security\r\nconsole.log(\"Using SHOPIFY_APP_URL:\", SHOPIFY_APP_URL);\r\nconsole.log(\"Using SCOPES:\", SCOPES);\r\nconsole.log(\"--- End Debugging Logs ---\");\r\n// --- END NEW LOGGING ---\r\n\r\nconst shopify = shopifyApp({\r\n  // Using hardcoded values for debugging as requested\r\n  apiKey: SHOPIFY_API_KEY,\r\n  apiSecretKey: SHOPIFY_API_SECRET,\r\n  // IMPORTANT: Use LATEST_API_VERSION for optimal compatibility with Shopify's GraphQL schema.\r\n  // This ensures that mutations like 'productCreate' with 'variants' are correctly recognized.\r\n  apiVersion: LATEST_API_VERSION,\r\n  scopes: SCOPES.split(\",\"), // Split the hardcoded string into an array\r\n  appUrl: SHOPIFY_APP_URL,\r\n  authPathPrefix: \"/auth\",\r\n  sessionStorage: new PrismaSessionStorage(prisma),\r\n  distribution: AppDistribution.AppStore,\r\n  future: {\r\n    unstable_newEmbeddedAuthStrategy: true,\r\n    removeRest: true,\r\n  },\r\n  // Keep customShopDomains if it's still relevant to your setup,\r\n  // otherwise, you might remove this block if not using custom domains.\r\n  ...(process.env.SHOP_CUSTOM_DOMAIN\r\n    ? { customShopDomains: [process.env.SHOP_CUSTOM_DOMAIN] }\r\n    : {}),\r\n});\r\n\r\nexport default shopify;\r\n// Export the API version used (LATEST_API_VERSION)\r\nexport const apiVersion = LATEST_API_VERSION;\r\nexport const addDocumentResponseHeaders = shopify.addDocumentResponseHeaders;\r\nexport const authenticate = shopify.authenticate;\r\nexport const unauthenticated = shopify.unauthenticated;\r\nexport const login = shopify.login;\r\nexport const registerWebhooks = shopify.registerWebhooks;\r\nexport const sessionStorage = shopify.sessionStorage;\r\n"],"file":"shopify.server.dev.js"}