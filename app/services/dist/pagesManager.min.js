"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.readPages=readPages,exports.addPage=addPage,exports.writePages=writePages;var _promises=_interopRequireDefault(require("fs/promises")),_path=_interopRequireDefault(require("path"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var DATA_DIR=_path.default.join(process.cwd(),"app","data"),PAGES_FILE=_path.default.join(DATA_DIR,"pages.json");function readPages(){var r,t;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(_promises.default.access(PAGES_FILE));case 3:return e.next=5,regeneratorRuntime.awrap(_promises.default.readFile(PAGES_FILE,"utf8"));case 5:return r=e.sent,t=JSON.parse(r),e.abrupt("return",Array.isArray(t)?t:[]);case 10:if(e.prev=10,e.t0=e.catch(0),"ENOENT"===e.t0.code)return e.next=15,regeneratorRuntime.awrap(_promises.default.mkdir(DATA_DIR,{recursive:!0}));e.next=18;break;case 15:return e.next=17,regeneratorRuntime.awrap(_promises.default.writeFile(PAGES_FILE,JSON.stringify([],null,2)));case 17:return e.abrupt("return",[]);case 18:throw e.t0;case 19:case"end":return e.stop()}},null,null,[[0,10]])}function addPage(r){var t;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(readPages());case 2:return(t=e.sent).push(r),e.next=6,regeneratorRuntime.awrap(_promises.default.writeFile(PAGES_FILE,JSON.stringify(t,null,2)));case 6:return e.abrupt("return",r);case 7:case"end":return e.stop()}})}function writePages(r){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(_promises.default.mkdir(DATA_DIR,{recursive:!0}));case 2:return e.next=4,regeneratorRuntime.awrap(_promises.default.writeFile(PAGES_FILE,JSON.stringify(r,null,2)));case 4:case"end":return e.stop()}})}
//# sourceMappingURL=pagesManager.min.js.map
