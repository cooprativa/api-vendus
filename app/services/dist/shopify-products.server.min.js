"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.readProducts=readProducts,exports.createProducts=createProducts;var _promises=_interopRequireDefault(require("fs/promises")),_nodeFetch=_interopRequireDefault(require("node-fetch"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function readProducts(){var r;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(_promises.default.readFile("./app/data/products.json","utf-8"));case 2:return r=e.sent,e.abrupt("return",JSON.parse(r));case 4:case"end":return e.stop()}})}function createProducts(r,t){var n,a,o,s,u,c,i,p,d,f;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(readProducts());case 2:n=e.sent,o=!(a=!0),s=void 0,e.prev=6,u=n[Symbol.iterator]();case 8:if(a=(c=u.next()).done){e.next=26;break}return i=c.value,e.next=12,regeneratorRuntime.awrap((0,_nodeFetch.default)("https://".concat(r,"/admin/api/2023-07/products.json"),{method:"POST",headers:{"X-Shopify-Access-Token":t,"Content-Type":"application/json"},body:JSON.stringify({product:i})}));case 12:if((p=e.sent).ok){e.next=19;break}return e.next=16,regeneratorRuntime.awrap(p.text());case 16:return d=e.sent,console.error("Failed creating product:",d),e.abrupt("continue",23);case 19:return e.next=21,regeneratorRuntime.awrap(p.json());case 21:f=e.sent,console.log("Created product:",f.product.title);case 23:a=!0,e.next=8;break;case 26:e.next=32;break;case 28:e.prev=28,e.t0=e.catch(6),o=!0,s=e.t0;case 32:e.prev=32,e.prev=33,a||null==u.return||u.return();case 35:if(e.prev=35,o)throw s;e.next=38;break;case 38:return e.finish(35);case 39:return e.finish(32);case 40:case"end":return e.stop()}},null,null,[[6,28,32,40],[33,,35,39]])}
//# sourceMappingURL=shopify-products.server.min.js.map
