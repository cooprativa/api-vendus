{"version":3,"sources":["settings.server.js"],"names":["settingsStore","lastUpdated","getSettings","vendusApi","process","env","VENDUS_API_KEY","updateSettings","newSettings","console","warn","restOfSettings","getVendusApi","apiKey"],"mappings":";;;;;;;;;AAIA;;;;;;;;;;;;AAEA;AACA;AACA;AACA;AACA,IAAIA,aAAa,GAAG;AAClBC,EAAAA,WAAW,EAAE,IADK,CACA;;AADA,CAApB;;AAIO,SAASC,WAAT,GAAuB;AAC5B;AACA,2BACKF,aADL;AAEEG,IAAAA,SAAS,EAAEC,OAAO,CAACC,GAAR,CAAYC,cAAZ,IAA8B,EAF3C,CAE8C;;AAF9C;AAID;;AAEM,SAASC,cAAT,CAAwBC,WAAxB,EAAqC;AAC1C;AACA;AACA;AACA,MAAI,eAAeA,WAAnB,EAAgC;AAC9BC,IAAAA,OAAO,CAACC,IAAR,CAAa,0JAAb,EAD8B,CAE9B;;AAF8B,QAGtBP,SAHsB,GAGWK,WAHX,CAGtBL,SAHsB;AAAA,QAGRQ,cAHQ,4BAGWH,WAHX;;AAI9BR,IAAAA,aAAa,qBAAQA,aAAR,MAA0BW,cAA1B,CAAb;AACD,GALD,MAKO;AACL;AACAX,IAAAA,aAAa,qBAAQA,aAAR,MAA0BQ,WAA1B,CAAb;AACD;;AACD,SAAOR,aAAP;AACD;;AAEM,SAASY,YAAT,GAAwB;AAC7B;AACA,MAAMC,MAAM,GAAGT,OAAO,CAACC,GAAR,CAAYC,cAA3B;;AACA,MAAI,CAACO,MAAL,EAAa;AACXJ,IAAAA,OAAO,CAACC,IAAR,CAAa,+EAAb;AACD;;AACD,SAAOG,MAAP;AACD","sourcesContent":["// app/services/settings.server.js\r\n\r\n// This line ensures your .env variables are loaded at application startup.\r\n// Make sure you have a .env file in your project root with VENDUS_API_KEY=YOUR_KEY\r\nimport 'dotenv/config';\r\n\r\n// If you have other settings you want to manage through the UI and persist,\r\n// you would need a database for 'settingsStore'. For the API key,\r\n// process.env is the correct source.\r\n// For now, we'll keep a minimal settingsStore if getSettings/updateSettings are still called by app.settings.jsx\r\nlet settingsStore = {\r\n  lastUpdated: null // This can still be updated by the UI\r\n};\r\n\r\nexport function getSettings() {\r\n  // Return the in-memory settings, but ensure vendusApi always comes from process.env\r\n  return {\r\n    ...settingsStore,\r\n    vendusApi: process.env.VENDUS_API_KEY || \"\" // This is the crucial change\r\n  };\r\n}\r\n\r\nexport function updateSettings(newSettings) {\r\n  // This function will update the 'settingsStore' with general settings.\r\n  // It's CRUCIAL that it does NOT try to update the 'vendusApi' property,\r\n  // as the API key should only be set via environment variables.\r\n  if ('vendusApi' in newSettings) {\r\n    console.warn(\"Attempted to update Vendus API key via updateSettings. It should be set via environment variable (VENDUS_API_KEY). Ignoring this update for 'vendusApi'.\");\r\n    // Destructure to exclude vendusApi from being saved to the in-memory store\r\n    const { vendusApi, ...restOfSettings } = newSettings;\r\n    settingsStore = { ...settingsStore, ...restOfSettings };\r\n  } else {\r\n    // If 'vendusApi' is not in newSettings, update as normal.\r\n    settingsStore = { ...settingsStore, ...newSettings };\r\n  }\r\n  return settingsStore;\r\n}\r\n\r\nexport function getVendusApi() {\r\n  // This function is dedicated to providing the Vendus API key directly from environment variables.\r\n  const apiKey = process.env.VENDUS_API_KEY;\r\n  if (!apiKey) {\r\n    console.warn(\"⚠️ VENDUS_API_KEY environment variable is not set. Vendus API calls may fail.\");\r\n  }\r\n  return apiKey;\r\n}\r\n"],"file":"settings.server.dev.js"}